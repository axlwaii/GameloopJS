var GameLoop=GameLoop||{};window.requestAnimFrame=function(){"use strict";return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/30)}}(),GameLoop=function(e,n,t){"use strict";function o(e,n){return e.z<n.z?-1:e.z>n.z?1:0}function i(){return.1*parseInt(Date.now()-p,10)}function r(){for(G=0;G<v.length;G++)v[G].render(u,s)}function a(){for(x=0;x<v.length;x++)v[x].update(u,s);r()}function c(){return setTimeout(function(){e.requestAnimFrame(c)},1e3/d),s.save(),a(),p=Date.now(),s.restore(),j?void 0:!1}var u,s,f,d,m,w,l,p,v,h,g,b,O,j,q,z,A,F,x,G;return l=function(e){return e===t?(console.error("No canvas object is defined"),!1):(j=!1,v=[],u=this.canvas=n.getElementById(e),s=this.context=u.getContext("2d"),void w(60))},w=function(e){return d=e||d,m=1e3/d,d},h=function(e){"object"==typeof e&&(e.update===t&&(e.update=function(){}),e.render===t&&(e.render=function(){}),e.z===t&&(e.z=0),v.indexOf(e)<0&&(v.push(e),v.sort(o)))},g=function(e){var n;for(n=0;n<e.length;n++){var t=e[n];h(t)}},b=function(e){v.indexOf(e)>=0&&v.splice(v.indexOf(e,1))},O=function(e){var n;for(n=0;n<e.length;n++){var t=e[n];b(t)}},f=function(){s.clearRect(0,0,u.width,u.height)},A=function(){0===v.length&&console.warn("No gameObjects in the Game."),q=Date.now(),p=Date.now(),j=!0,c(),console.info("Gameloop is running")},F=function(){j=!1,z=Date.now(),console.info("Gameloop stopped")},{canvas:u,context:s,clearCanvas:f,init:l,deltaTime:i,fps:w,gameObjects:v,addObject:h,addObjects:g,removeObject:b,removeObjects:O,start:A,stop:F}}(window,document);