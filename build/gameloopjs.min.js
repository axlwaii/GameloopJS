/*! gameloopjs 2013-08-03 */
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/30)}}();var GameLoop=function(){function a(){return(new Date).getTime()>j?!0:!1}function b(){a()&&(c(),d(),j=(new Date).getTime()+o,i=(new Date).getTime()),n&&setTimeout(function(){window.requestAnimFrame(b)},25)}function c(){f.clearRect(0,0,e.width,e.height),f.save();for(var a=0;a<g.length;a++){var b=g[a];"undefined"!=typeof b.render&&b.render(e,f)}f.restore()}function d(){g.forEach(function(a){"undefined"!=typeof a.update&&a.update(k.keysPressed,k.mousePressed)}),g.forEach(function(a){"undefined"!=typeof a.collisions&&a.collisions()})}var e,f,g,h,i,j,k={},l={},m=[],n=!1,o=1e3/30;return k.mode="game",k.mousePressed=[],k.keysPressed=[],k.addAnimationObject=function(a){"object"==typeof a&&m.push(a)},k.getLevel=function(){return l},k.setLevel=function(a){"object"==typeof a&&(l=a)},k.getCanvas=function(){return e},k.getContext=function(){return f},k.addController=function(a){"object"==typeof a&&g.push(a)},k.removeController=function(a){g.indexOf(a)>=0&&g.splice(g.indexOf(a,1))},k.deltaTime=function(){return.01*parseInt(Date.now()-i,10)},k.init=function(a){return"undefined"==typeof a?(console.error("No canvas object is defined"),!1):(g=[],e=document.getElementById(a),f=e.getContext("2d"),void 0)},k.start=function(){0===!g.length&&console.warn("No controllers in the Game."),h=Date.now(),j=(new Date).getTime(),i=(new Date).getTime(),n=!0,b()},k.stop=function(){n=!1},k}();