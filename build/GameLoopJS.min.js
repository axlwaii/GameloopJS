/*! GameLoopJS 2013-06-19 */
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/30)}}();var canvas,context,GameLoop=function(){function a(){return(new Date).getTime()>i?!0:!1}function b(){a()&&(d(),l||e(),c(),i=(new Date).getTime()+n,h=(new Date).getTime()),setTimeout(function(){window.requestAnimFrame(b)},10)}function c(){f.forEach(function(a){"undefined"!=typeof a.emit&&a.emit()})}function d(){context.clearRect(0,0,canvas.width,canvas.height),context.save(),void 0!==k.render&&k.render(context);for(var a=0;a<f.length;a++){var b=f[a];"undefined"!=typeof b.render&&b.render(context)}m.forEach(function(a){void 0!==a.startTime&&(a.render(context),void 0!==a.animationTime?Date.now()-a.startTime>a.animationTime&&m.splice(m.indexOf(a),1):Date.now()-a.startTime>500&&m.splice(m.indexOf(a),1))}),context.restore()}function e(){f.forEach(function(a){"undefined"!=typeof a.render&&a.update(j.keysPressed,j.mousePressed)}),f.forEach(function(a){"undefined"!=typeof a.collisions&&a.collisions()})}var f,g,h,i,j={},k={},l=!1,m=[],n=1e3/30;return j.mode="game",j.mousePressed=[],j.keysPressed=[],j.deltaTime=function(){return.01*parseInt(Date.now()-h,10)},j.addAnimationObject=function(a){"object"==typeof a&&m.push(a)},j.getLevel=function(){return k},j.setLevel=function(a){"object"==typeof a&&(k=a)},j.addController=function(a){"object"==typeof a&&f.push(a)},j.removeController=function(a){f.indexOf(a)>=0&&f.splice(f.indexOf(a,1))},j.init=function(a){return"undefined"==typeof a?(console.error("No canvas object is defined"),!1):(f=[],canvas=document.getElementById(a),context=canvas.getContext("2d"),void 0)},j.start=function(){0===!f.length&&console.warn("No controllers in the Game."),g=Date.now(),i=(new Date).getTime(),h=(new Date).getTime(),b()},j.pause=function(){l=!0},j.resume=function(){l=!1},j}();